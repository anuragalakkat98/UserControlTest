<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="UserControlTest.SingleTrain"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UserControlTest"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    x:Name="SingleTrainUserControl"
Width="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Width}"
Height="{Binding RelativeSource={RelativeSource Mode=Self}, Path=Height}">

    <Viewbox Stretch="Uniform">
        <Grid>
            <!--<Canvas Width="600" Height="400">-->
            <Canvas Width="{Binding DataContext.CanvasWidth, ElementName=SingleTrainUserControl}" 
                    Height="{Binding DataContext.CanvasHeight, ElementName=SingleTrainUserControl}">
                <!--Inner rectangle-->
                <Rectangle
                        Canvas.Left="-95"
                        Canvas.Top="10"
                        Width="650"
                        Height="730"
                        Stroke="White"
                        StrokeThickness="5"
                        Fill="LightGray" />


                <!--Bottom triangle-->
                <Path 
                        Canvas.Left="-198"
                        Canvas.Top="842"
                        Stroke="#FF444444" 
                        StrokeThickness="5" 
                        Fill="#FF444444"
                        Data="
                          M 50,50   
                          L 50,150  
                          L 150,150 
                          Z         
                        ">

                    <Path.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="0.7" ScaleY="0.7" />
                            <RotateTransform Angle="-90" />
                        </TransformGroup>
                    </Path.RenderTransform>
                    <Path.RenderTransformOrigin>
                        0.5,0.5
                    </Path.RenderTransformOrigin>
                </Path>


                <Path 
                        Canvas.Left="-234"
                        Canvas.Top="667"
                        Stroke="White"
                        StrokeThickness="2"
                        Fill="White"
                        Data="
                          M 50,50     
                          L 100,50    
                          L 50,100    
                          Z           
                        " >
                    <Path.RenderTransform>
                        <ScaleTransform ScaleX="1.4" ScaleY="1.4" />
                    </Path.RenderTransform>
                    <Path.RenderTransformOrigin>
                        0.5,0.5
                    </Path.RenderTransformOrigin>
                </Path>

                <Path 
                        Canvas.Left="518"
                        Canvas.Top="48"
                        Stroke="#FF444444" 
                        StrokeThickness="5" 
                        Fill="#FF444444"
                        Data="
                          M 50,50   
                          L 50,150  
                          L 150,150 
                          Z         
                        ">

                    <Path.RenderTransform>
                        <TransformGroup>
                            <!-- Scaling the Shape -->
                            <ScaleTransform ScaleX="0.7" ScaleY="0.7" />
                            <!-- Rotating the Shape -->
                            <RotateTransform Angle="-90" />
                        </TransformGroup>
                    </Path.RenderTransform>
                    <Path.RenderTransformOrigin>
                        0.5,0.5
                    </Path.RenderTransformOrigin>
                </Path>

                <Path 
                        Canvas.Left="481"
                        Canvas.Top="-130"
                        Stroke="White"
                        StrokeThickness="2"
                        Fill="White"
                        Data="
                          M 50,50     
                          L 100,50    
                          L 50,100    
                          Z           
                        " >
                    <Path.RenderTransform>
                        <ScaleTransform ScaleX="1.4" ScaleY="1.4" />
                    </Path.RenderTransform>
                    <Path.RenderTransformOrigin>
                        0.5,0.5
                    </Path.RenderTransformOrigin>
                </Path>

                
                <!--Left circle-->
                <Ellipse Canvas.Left="0" Canvas.Top="110"
                 Width="160" Height="160"
                 Stroke="White" 
                 StrokeThickness="5" 
                 Fill="Transparent"
                 Visibility="{Binding DataContext.LeftBiggerCircleElementVisibility, ElementName=SingleTrainUserControl}"/>

                <!--Right circle-->
                <Ellipse Canvas.Left="300" Canvas.Top="110"
                    Width="160" Height="160"
                    Stroke="White" 
                    StrokeThickness="5" 
                    Fill="Transparent"
                    Visibility="{Binding DataContext.RightBiggerCircleElementVisibility, ElementName=SingleTrainUserControl}"/>


                <!--Train body-->
                <Polygon 
                        Canvas.Left="-20"
                        Canvas.Top="70"
                        Stroke="#FF444444" 
                        StrokeThickness="2" 
                        Fill="#FF444444"
                    Canvas.ZIndex="2"
                        Points="
                            40,17    
                            160,17   
                            190,50   
                            175,155  
                            150,180  
                            50,180   
                            25,155   
                            10,50    
                        ">
                    <Polygon.RenderTransform>
                        <ScaleTransform ScaleX="2.5" ScaleY="2.5" />
                    </Polygon.RenderTransform>
                </Polygon>

                <!--Window-->
                <Rectangle Canvas.Left="99" Canvas.Top="190"
                         Width="270" Height="130"
                         Stroke="LightGray" 
                         StrokeThickness="5" 
                         Fill="LightGray"  
                         Canvas.ZIndex="3"/>

                <!--Right bottom cirlce-->
                <Ellipse Canvas.Left="310" Canvas.Top="413"
                         Width="110" Height="110"
                         Stroke="White" 
                         StrokeThickness="5" 
                         Fill="Transparent"
                         Visibility="{Binding DataContext.RightBottomSmallerCircleElementVisibility, ElementName=SingleTrainUserControl}"/>

                <!--Right bottom small circle-->
                <Ellipse Canvas.Left="300" Canvas.Top="390"
                         Width="70" Height="70"
                         Stroke="LightGray" 
                         StrokeThickness="5" 
                         Fill="LightGray"
                         Canvas.ZIndex="3"/>

                <!--Left bottom cirlce-->
                <Ellipse Canvas.Left="40" Canvas.Top="413"
                         Width="110" Height="110"
                         Stroke="White" 
                         StrokeThickness="5" 
                         Fill="Transparent"
                         Visibility="{Binding DataContext.LeftBottomSmallerCircleElementVisibility, ElementName=SingleTrainUserControl}"/>

                <!--Left bottom small circle-->
                <Ellipse Canvas.Left="90" Canvas.Top="390"
                         Width="70" Height="70"
                         Stroke="LightGray" 
                         StrokeThickness="5" 
                         Fill="LightGray"
                         Canvas.ZIndex="3"/>

                <!--Track-->
                <Rectangle Canvas.Left="95" Canvas.Top="550"
                           Width="270" Height="20"
                           Stroke="Black" 
                           StrokeThickness="5" 
                           Fill="Black"/>
                
                <!--Track-->
                <Rectangle Canvas.Left="77" Canvas.Top="600"
                           Width="310" Height="20"
                           Stroke="Black" 
                           StrokeThickness="5" 
                           Fill="Black"/>

                <!--Track-->
                <Path Stroke="Black" 
                  StrokeThickness="5" 
                  Fill="Black"
                  Canvas.Left="140"
                  Canvas.Top="480"
                  Data="
                    M 180,42    
                    L 210,40    
                    L 300,210    
                    L 270,210   
                    Z           
                  " />
                
                <!--Track-->
                <Path Stroke="Black" 
                      StrokeThickness="5" 
                      Fill="Black"
                      Canvas.Left="320"
                      Canvas.Top="480"
                      Data="
                        M 180,42    
                        L 210,40    
                        L 300,210    
                        L 270,210   
                        Z           
                      ">
                    <Path.RenderTransform>
                        <ScaleTransform ScaleX="-1" ScaleY="1" />
                    </Path.RenderTransform>
                    <Path.RenderTransformOrigin>
                        0.5,0.5
                    </Path.RenderTransformOrigin>
                </Path>


                <!--Bottom rectangle-->
                <Rectangle
                       Canvas.Left="-92"
                       Canvas.Top="736"
                       Width="650"
                       Height="72"
                       Stroke="#FF444444"
                       StrokeThickness="5"
                       Fill="#FF444444" />

                <!--Right rectangle-->
                <Rectangle
                       Canvas.Left="550"
                       Canvas.Top="11"
                       Width="75"
                       Height="797"
                       Stroke="#FF444444"
                       StrokeThickness="5"
                       Fill="#FF444444" />

                <!--Top rectangle-->
                <Rectangle
                       Canvas.Left="-95"
                       Canvas.Top="-61"
                       Width="647"
                       Height="72"
                       Stroke="White"
                       StrokeThickness="5"
                       Fill="White" />

                <!--Left rectangle-->
                <Rectangle
                       Canvas.Left="-165"
                       Canvas.Top="-61"
                       Width="75"
                       Height="800"
                       Stroke="White"
                       StrokeThickness="5"
                       Fill="White" />
            </Canvas>
        </Grid>
    </Viewbox>
</UserControl>
